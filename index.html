<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LGA of Origin Certificate Application</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen flex items-center justify-center">

  <div class="bg-white shadow-2xl rounded-3xl p-10 w-full max-w-3xl border border-indigo-100">
    <h2 class="text-3xl font-extrabold mb-8 text-indigo-700 text-center">
      üìù LGA of Origin Certificate Application
    </h2>
    
    <form id="originForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">

      <!-- Full Name -->
      <div class="relative md:col-span-2">
        <input type="text" name="full_name" id="full_name"
          class="peer w-full rounded-xl border border-gray-300 bg-gray-50 px-4 pt-5 pb-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300 focus:bg-white transition"
          placeholder=" " required />
        <label for="full_name"
          class="absolute left-4 top-2 text-sm text-gray-500 transition-all peer-placeholder-shown:top-5 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-base peer-focus:top-2 peer-focus:text-sm peer-focus:text-indigo-600">
          Full Name
        </label>
      </div>

      <!-- Date of Birth -->
      <div class="relative">
        <input type="date" name="date_of_birth" id="date_of_birth"
          class="peer w-full rounded-xl border border-gray-300 bg-gray-50 px-4 pt-5 pb-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300 focus:bg-white transition"
          placeholder=" " required />
        <label for="date_of_birth"
          class="absolute left-4 top-2 text-sm text-gray-500 peer-focus:text-indigo-600">
          Date of Birth
        </label>
      </div>

      <!-- Gender -->
      <div class="relative">
        <select name="gender" id="gender"
          class="peer w-full rounded-xl border border-gray-300 bg-gray-50 px-4 pt-5 pb-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300 focus:bg-white transition" required>
          <option value="">-- Select Gender --</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>
        <label for="gender"
          class="absolute left-4 top-2 text-sm text-gray-500 peer-focus:text-indigo-600">
          Gender
        </label>
      </div>

      <!-- Address -->
      <div class="relative md:col-span-2">
        <input type="text" name="address" id="address"
          class="peer w-full rounded-xl border border-gray-300 bg-gray-50 px-4 pt-5 pb-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300 focus:bg-white transition"
          placeholder=" " required />
        <label for="address"
          class="absolute left-4 top-2 text-sm text-gray-500 peer-focus:text-indigo-600">
          Address
        </label>
      </div>

      <!-- Clan -->
      <div class="relative">
        <select name="clan" id="clan"
          class="peer w-full rounded-xl border border-gray-300 bg-gray-50 px-4 pt-5 pb-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300 focus:bg-white transition" required>
          <option value="">-- Select Clan --</option>
          <option value="Agbon">Agbon Clan</option>
          <option value="Abraka Oruarivie">Abraka Oruarivie Clan</option>
          <option value="Abraka Umiagwa">Abraka Umiagwa Clan</option>
        </select>
        <label for="clan"
          class="absolute left-4 top-2 text-sm text-gray-500 peer-focus:text-indigo-600">
          Clan
        </label>
      </div>

      <!-- Sub Clan -->
      <div class="relative">
        <select name="sub_clan" id="sub_clan"
          class="peer w-full rounded-xl border border-gray-300 bg-gray-50 px-4 pt-5 pb-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300 focus:bg-white transition" required>
          <option value="">-- Select Sub Clan --</option>
        </select>
        <label for="sub_clan"
          class="absolute left-4 top-2 text-sm text-gray-500 peer-focus:text-indigo-600">
          Sub Clan
        </label>
      </div>

      <!-- LGA of Origin -->
      <div class="relative">
        <input type="text" name="lga_of_origin" id="lga_of_origin"
          class="peer w-full rounded-xl border border-gray-300 bg-gray-50 px-4 pt-5 pb-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300 focus:bg-white transition"
          placeholder=" " required />
        <label for="lga_of_origin"
          class="absolute left-4 top-2 text-sm text-gray-500 peer-focus:text-indigo-600">
          LGA of Origin
        </label>
      </div>

      <!-- State of Origin -->
      <div class="relative">
        <input type="text" name="state_of_origin" id="state_of_origin"
          class="peer w-full rounded-xl border border-gray-300 bg-gray-50 px-4 pt-5 pb-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300 focus:bg-white transition"
          placeholder=" " required />
        <label for="state_of_origin"
          class="absolute left-4 top-2 text-sm text-gray-500 peer-focus:text-indigo-600">
          State of Origin
        </label>
      </div>

      <!-- National ID -->
      <div class="relative">
        <input type="text" name="national_id_number" id="national_id_number"
          class="peer w-full rounded-xl border border-gray-300 bg-gray-50 px-4 pt-5 pb-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300 focus:bg-white transition"
          placeholder=" " required />
        <label for="national_id_number"
          class="absolute left-4 top-2 text-sm text-gray-500 peer-focus:text-indigo-600">
          National ID Number
        </label>
      </div>

      <!-- Phone -->
      <div class="relative">
        <input type="tel" name="phone_number" id="phone_number"
          class="peer w-full rounded-xl border border-gray-300 bg-gray-50 px-4 pt-5 pb-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300 focus:bg-white transition"
          placeholder=" " required />
        <label for="phone_number"
          class="absolute left-4 top-2 text-sm text-gray-500 peer-focus:text-indigo-600">
          Phone Number
        </label>
      </div>

      <!-- Email -->
      <div class="relative">
        <input type="email" name="email" id="email"
          class="peer w-full rounded-xl border border-gray-300 bg-gray-50 px-4 pt-5 pb-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300 focus:bg-white transition"
          placeholder=" " required />
        <label for="email"
          class="absolute left-4 top-2 text-sm text-gray-500 peer-focus:text-indigo-600">
          Email
        </label>
      </div>

      <!-- Supporting Document -->
      <div class="relative md:col-span-2">
        <input type="url" name="supporting_doc" id="supporting_doc"
          class="peer w-full rounded-xl border border-gray-300 bg-gray-50 px-4 pt-5 pb-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300 focus:bg-white transition"
          placeholder=" " required />
        <label for="supporting_doc"
          class="absolute left-4 top-2 text-sm text-gray-500 peer-focus:text-indigo-600">
          Supporting Document (URL)
        </label>
      </div>

      <!-- Submit -->
      <div class="md:col-span-2">
        <button type="submit"
          class="w-full bg-indigo-600 text-white font-semibold py-3 rounded-xl shadow-lg hover:bg-indigo-700 hover:shadow-xl transition">
          üöÄ Submit Application
        </button>
      </div>
    </form>

    <!-- Response message -->
    <div id="responseMsg" class="mt-6 text-center"></div>
  </div>

  <script>
    // Clan -> Sub Clan mapping
    const SUB_CLAN_CHOICES = {
      'Agbon': [
        'Okpara Inland/Waterside', 'Kokori Inland', 'Eku', 'Orhoakpor', 'Otorho-Agbon (Isiokolo)',
        'Igun', 'Ovu-Inland', 'Okurekpo', 'Oviorie-Ovu', 'Samagidi'
      ],
      'Abraka Oruarivie': [
        'Uhruoka', 'Ekrejeta', 'Ajalomi', 'Urhuovie', 'Ehro', 'Ugono',
        'Erhirhie', 'Ogbeje', 'Otorho'
      ],
      'Abraka Umiagwa': [
        'Orial', 'Uruagbesa', 'Umeghe', 'Ughere', 'Oteri', 'Agbarha'
      ]
    };

    const clanSelect = document.getElementById("clan");
    const subClanSelect = document.getElementById("sub_clan");

    clanSelect.addEventListener("change", () => {
      const selectedClan = clanSelect.value;
      subClanSelect.innerHTML = '<option value="">-- Select Sub Clan --</option>';

      if (SUB_CLAN_CHOICES[selectedClan]) {
        SUB_CLAN_CHOICES[selectedClan].forEach(sub => {
          const option = document.createElement("option");
          option.value = sub;
          option.textContent = sub;
          subClanSelect.appendChild(option);
        });
      }
    });

    // Submit handler
    document.getElementById("originForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const form = e.target;
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());

      try {
        const res = await fetch("https://ethiope.onrender.com/api/lg-origin-certificates/", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(data)
        });

        if (!res.ok) throw new Error("Failed to submit");

        document.getElementById("responseMsg").innerHTML =
          `<div class="p-3 rounded-lg bg-green-100 text-green-700 font-semibold">‚úÖ Submitted Successfully!</div>`;
      } catch (error) {
        document.getElementById("responseMsg").innerHTML =
          `<div class="p-3 rounded-lg bg-red-100 text-red-700 font-semibold">‚ùå Error submitting form.</div>`;
      }
    });
  </script>

</body>
</html>
